{"version":3,"sources":["webpack:///./app/government/view/TravelRoute/index.js","webpack:///./app/government/view/TravelRoute/index.scss?85a4"],"names":["TravelRoute","props","variable","query","window","location","search","substring","vars","split","i","length","pair","Promise","resolve","geolocation","BMap","Geolocation","getCurrentPosition","r","point","map","Map","mapContainer","centerAndZoom","Point","driving","DrivingRoute","renderOptions","autoViewport","getCurrent","console","log","lat","end","lon","start","lng","ak","Object","keys","b_preload","$script","document","createElement","body","appendChild","b_initBMap","removeChild","src","state","area","value","setMapRef","ref","getQueryVariable","createMapScript","then","initMap","width","height","style","Component"],"mappings":"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","file":"routes/travelRoute.76a3122c.chunk.js","sourcesContent":["/**\n * Created by XM on 2018/9/3.\n * @email xm@tqzgc.com\n */\nimport React, { Component } from 'react';\nimport './index.scss'\nexport default class TravelRoute extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { area: [], value: '' };\n        this.setMapRef = ref => {\n            this.mapContainer = ref;\n        };\n        this.lon = '';\n        this.lat = '';\n    }\n\n    componentDidMount() {\n        this.lon = this.getQueryVariable('lon');\n        this.lat = this.getQueryVariable('lat');\n        this.createMapScript().then(this.initMap);\n    }\n    getQueryVariable = (variable) => {\n        let query = window.location.search.substring(1);\n        let vars = query.split(\"&\");\n        for (let i = 0; i < vars.length; i++) {\n            let pair = vars[i].split(\"=\");\n            if (pair[0] === variable) {\n                return pair[1];\n            }\n        }\n        return (false);\n    }\n\n    getCurrent = () =>{\n        return new Promise(resolve =>{\n            var geolocation = new BMap.Geolocation();\n            geolocation.getCurrentPosition((r)=>{\n                return resolve(r.point)\n            });\n        } )\n    }\n\n    initMap = async BMap => {\n        let map = new BMap.Map(this.mapContainer);\n        map.centerAndZoom(new BMap.Point(117.288234, 34.214721), 12);\n        let driving = new BMap.DrivingRoute(map, {renderOptions:{map: map, autoViewport: true,}});\n        let point = await this.getCurrent()\n        console.log(this.lat)\n        let end = new BMap.Point(this.lon, this.lat);\n        console.log(end)\n        let start = new BMap.Point(point.lng, point.lat);\n        driving.search(start, end);\n\n    };\n\n    createMapScript = () => {\n        const ak = 'CXS6PvbOPD5DlrV5xdolrG9V9uGyaCX3';\n        window.BMap = window.BMap || {};\n        if (Object.keys(window.BMap).length === 0) {\n            window.BMap.b_preload = new Promise(resolve => {\n                const $script = document.createElement('script');\n                document.body.appendChild($script);\n                window.b_initBMap = () => {\n                    resolve(window.BMap);\n                    document.body.removeChild($script);\n                    window.BMap.b_preload = null;\n                    window.b_initBMap = null;\n                };\n\n                $script.src = `https://api.map.baidu.com/api?v=2.0&ak=${ak}&callback=b_initBMap`;\n            });\n            return window.BMap.b_preload;\n        }\n\n        if (!window.BMap.b_preload) {\n            return Promise.resolve(window.BMap);\n        }\n        return window.BMap.b_preload;\n    };\n\n\n    render() {\n        const { width = '100%', height = '100vh', style } = this.props;\n\n        return (\n            <div>\n                <div>\n\n                </div>\n                <div  ref={this.setMapRef} style={{width,height}} />\n            </div>\n        );\n    }\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}